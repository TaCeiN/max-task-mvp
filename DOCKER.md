# –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é —á–µ—Ä–µ–∑ Docker

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç **–ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é** –ø–æ –¥–µ–ø–ª–æ—é –ø—Ä–æ–µ–∫—Ç–∞ —Å –º–æ–º–µ–Ω—Ç–∞ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–æ –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

**–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ:**
- ‚úÖ Docker –∏ Docker Compose —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –£ –≤–∞—Å –µ—Å—Ç—å VPS —Å –ø—É–±–ª–∏—á–Ω—ã–º IP –∞–¥—Ä–µ—Å–æ–º
- ‚úÖ –£ –≤–∞—Å –µ—Å—Ç—å –¥–æ–º–µ–Ω (–∏–ª–∏ –ø–æ–¥–¥–æ–º–µ–Ω—ã) –¥–ª—è backend –∏ webhook

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#1-–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è](#2-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π](#3-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-dns-–∑–∞–ø–∏—Å–µ–π)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall](#4-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-firewall)
5. [–í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–µ–ø–ª–æ—è](#5-–≤—ã–±–æ—Ä-–≤–∞—Ä–∏–∞–Ω—Ç–∞-–¥–µ–ø–ª–æ—è)
6. [–ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è](#6-–∑–∞–ø—É—Å–∫-–¥–µ–ø–ª–æ—è)
7. [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã](#7-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–∞–±–æ—Ç—ã)
8. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏](#8-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Å–µ—Ä–≤–∏—Å–∞–º–∏)
9. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#9-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### –®–∞–≥ 1.1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–º—É VPS

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH
ssh user@your-vps-ip
```

### –®–∞–≥ 1.2: –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω—É–∂–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, /opt –∏–ª–∏ /home/user)
cd /opt

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <URL_–í–ê–®–ï–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø> docker-max-main

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd docker-max-main
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
cd /opt
git clone https://github.com/your-username/docker-max-main.git
cd docker-max-main
```

### –®–∞–≥ 1.3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ
ls -la

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã:
# - backend/
# - frontend/
# - docker-compose.manual.yml
# - docker-compose.github.yml
# - env.example
# - deploy-github.sh
# - deploy-manual.sh
```

---

## 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –®–∞–≥ 2.1: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞
cp env.example .env

# –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
nano .env
# –∏–ª–∏
vim .env
```

### –®–∞–≥ 2.2: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ Max Bot

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞: [@MasterBot](https://tt.me/MasterBot)
2. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±–æ—Ç–∞
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (—Ñ–æ—Ä–º–∞—Ç: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`)

### –®–∞–≥ 2.3: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ SECRET_KEY

**–í–∞—Ä–∏–∞–Ω—Ç 1: Python (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)**
```bash
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: OpenSSL (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
openssl rand -base64 32
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: /dev/urandom (Linux)**
```bash
cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

### –®–∞–≥ 2.4: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

```env
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç–µ –æ—Ç @MasterBot)
MAX_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞_–∑–¥–µ—Å—å

# –î–æ–º–µ–Ω—ã (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏)
BACKEND_DOMAIN=backend-devcore-max.cloudpub.ru
WEBHOOK_DOMAIN=webhook-devcore-max.cloudpub.ru

# URL (–¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å https://)
BACKEND_URL=https://backend-devcore-max.cloudpub.ru
WEBHOOK_URL=https://webhook-devcore-max.cloudpub.ru

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤—ã—à–µ)
SECRET_KEY=–≤–∞—à_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á_–∑–¥–µ—Å—å

# Email –¥–ª—è Let's Encrypt (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤)
LETSENCRYPT_EMAIL=your-email@example.com
```

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```env
# –í—Ä–µ–º—è –¥–æ —É–¥–∞–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
NOTIFICATION_DELETE_AFTER_READ_SECONDS=43200

# URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
NOTIFICATION_IMAGE_URL=https://example.com/image.png

# –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è JWT —Ç–æ–∫–µ–Ω–∞ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
ACCESS_TOKEN_EXPIRE_MINUTES=180
```

#### –¢–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 1 (GitHub Pages):

```env
# GitHub Personal Access Token
GITHUB_TOKEN=–≤–∞—à_github_token_–∑–¥–µ—Å—å

# –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub Pages
GITHUB_REPO=username/repository

# GitHub –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
GITHUB_USER=username

# GitHub email
GITHUB_EMAIL=your-email@example.com
```

### –®–∞–≥ 2.5: –°–æ–∑–¥–∞–Ω–∏–µ GitHub Personal Access Token (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 1)

–ï—Å–ª–∏ –≤—ã –≤—ã–±—Ä–∞–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç 1 (–¥–µ–ø–ª–æ–π –Ω–∞ GitHub Pages):

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub: https://github.com/settings/tokens
2. –ù–∞–∂–º–∏—Ç–µ **"Generate new token"** ‚Üí **"Generate new token (classic)"**
3. –ù–∞–∑–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: "GitHub Pages Deploy")
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:
   - **"No expiration"** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)
   - –ò–ª–∏ **"90 days"** (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
5. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
   - ‚úÖ **`repo`** (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º)
   - –ò–ª–∏ –º–∏–Ω–∏–º—É–º: **`public_repo`** (–µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—É–±–ª–∏—á–Ω—ã–π)
6. –ù–∞–∂–º–∏—Ç–µ **"Generate token"**
7. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω —Å—Ä–∞–∑—É!** (–æ–Ω –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω)
8. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GITHUB_TOKEN`

### –®–∞–≥ 2.6: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª .env

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ nano:
# –ù–∞–∂–º–∏—Ç–µ Ctrl+O –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, Enter –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, Ctrl+X –¥–ª—è –≤—ã—Ö–æ–¥–∞

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ vim:
# –ù–∞–∂–º–∏—Ç–µ Esc, –∑–∞—Ç–µ–º :wq –∏ Enter –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤—ã—Ö–æ–¥–∞
```

### –®–∞–≥ 2.7: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ .env –Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ git

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env –≤ .gitignore
grep -q "^\.env$" .gitignore && echo "‚úÖ .env —É–∂–µ –≤ .gitignore" || echo ".env" >> .gitignore
```

---

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π

### –®–∞–≥ 3.1: –£–∑–Ω–∞–π—Ç–µ IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ VPS

```bash
# –ù–∞ –≤–∞—à–µ–º VPS –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
curl ifconfig.me
# –∏–ª–∏
hostname -I
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ IP –∞–¥—Ä–µ—Å** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS.

### –®–∞–≥ 3.2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–∏–º –¥–æ–º–µ–Ω–æ–º (–≥–¥–µ –≤—ã –ø–æ–∫—É–ø–∞–ª–∏ –¥–æ–º–µ–Ω)
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"DNS Management"** –∏–ª–∏ **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DNS"**
3. –î–æ–±–∞–≤—å—Ç–µ **A-–∑–∞–ø–∏—Å–∏**:

   | –¢–∏–ø | –ò–º—è (Host) | –ó–Ω–∞—á–µ–Ω–∏–µ (Value) | TTL |
   |-----|------------|------------------|-----|
   | A   | backend-devcore-max | IP_–í–ê–®–ï–ì–û_VPS | 3600 |
   | A   | webhook-devcore-max | IP_–í–ê–®–ï–ì–û_VPS | 3600 |

   **–ü—Ä–∏–º–µ—Ä:**
   - –ï—Å–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω: `cloudpub.ru`
   - –ò IP VPS: `123.45.67.89`
   - –¢–æ –∑–∞–ø–∏—Å–∏ –±—É–¥—É—Ç:
     - `backend-devcore-max.cloudpub.ru` ‚Üí `123.45.67.89`
     - `webhook-devcore-max.cloudpub.ru` ‚Üí `123.45.67.89`

4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**

### –®–∞–≥ 3.3: –î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è
nslookup backend-devcore-max.cloudpub.ru
nslookup webhook-devcore-max.cloudpub.ru

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ dig (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
dig backend-devcore-max.cloudpub.ru +short
dig webhook-devcore-max.cloudpub.ru +short
```

**–í–∞–∂–Ω–æ:** 
- DNS –∑–∞–ø–∏—Å–∏ –º–æ–≥—É—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å—Å—è –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–Ω—É—Ç –¥–æ 24 —á–∞—Å–æ–≤
- –ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –¥–µ–ø–ª–æ–π, –ø–æ–∫–∞ DNS –∑–∞–ø–∏—Å–∏ –Ω–µ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP
- –ë–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö DNS –∑–∞–ø–∏—Å–µ–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã!

---

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall

### –®–∞–≥ 4.1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x setup-firewall.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç (—Ç—Ä–µ–±—É–µ—Ç sudo)
sudo ./setup-firewall.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–∏–ø firewall (UFW, firewalld, –∏–ª–∏ iptables)
- –û—Ç–∫—Ä–æ–µ—Ç –ø–æ—Ä—Ç—ã 80 (HTTP) –∏ 443 (HTTPS)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ firewall

### –®–∞–≥ 4.2: –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

#### UFW (Ubuntu/Debian):

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 22/tcp  # SSH (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –æ—Ç–∫—Ä—ã—Ç)

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo ufw status

# –ï—Å–ª–∏ firewall –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω, –≤–∫–ª—é—á–∏—Ç–µ –µ–≥–æ
sudo ufw enable
```

#### firewalld (CentOS/RHEL):

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo firewall-cmd --list-all
```

#### iptables (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é):

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞)
# Ubuntu/Debian:
sudo iptables-save > /etc/iptables/rules.v4

# CentOS/RHEL:
sudo service iptables save
```

---

## 5. –í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–µ–ø–ª–æ—è

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞** –¥–µ–ø–ª–æ—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

### –í–∞—Ä–∏–∞–Ω—Ç 1: GitHub Pages (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ –Ω–∞ GitHub Pages
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- GitHub –∞–∫–∫–∞—É–Ω—Ç
- GitHub Personal Access Token (—Å–æ–∑–¥–∞–Ω –≤ —à–∞–≥–µ 2.5)
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è GitHub Pages

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:** `docker-compose.github.yml`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–µ–ø–ª–æ–µ–º
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π —Ö–æ—Å—Ç–∏–Ω–≥
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç GitHub —Ç–æ–∫–µ–Ω–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:** `docker-compose.manual.yml`

---

## 6. –ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–µ–ø–ª–æ–π –Ω–∞ GitHub Pages

#### –®–∞–≥ 6.1.1: –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x deploy-github.sh
```

#### –®–∞–≥ 6.1.2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π

```bash
./deploy-github.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `.env` —Ñ–∞–π–ª–∞
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. ‚úÖ –ó–∞–ø—É—Å–∫ nginx-proxy –∏ letsencrypt –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
4. ‚úÖ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ backend –∏ webhook –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
5. ‚úÖ –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏
6. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ GitHub Pages
7. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ webhooks
8. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç)

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 5-15 –º–∏–Ω—É—Ç (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞)

#### –®–∞–≥ 6.1.3: –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫, –≤—ã —É–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É.

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

#### –®–∞–≥ 6.2.1: –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x deploy-manual.sh
```

#### –®–∞–≥ 6.2.2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É –∏ –¥–µ–ø–ª–æ–π

```bash
./deploy-manual.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `.env` —Ñ–∞–π–ª–∞
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. ‚úÖ –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ Docker volume `frontend-build`
5. ‚úÖ –ó–∞–ø—É—Å–∫ nginx-proxy –∏ letsencrypt –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
6. ‚úÖ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ backend –∏ webhook –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
7. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ webhooks
8. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç)

#### –®–∞–≥ 6.2.3: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏–∑ volume

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Ñ–∞–π–ª–æ–≤
mkdir -p frontend-dist

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ Docker volume
docker run --rm \
  -v unitask_frontend-build:/source \
  -v $(pwd)/frontend-dist:/dest \
  alpine sh -c 'cp -r /source/* /dest/'

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã
ls -la frontend-dist/
```

**–¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `frontend-dist/` –Ω–∞ –≤–∞—à —Ö–æ—Å—Ç–∏–Ω–≥:**
- –ß–µ—Ä–µ–∑ FTP/SFTP
- –ß–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö–æ—Å—Ç–∏–Ω–≥–æ–º
- –ß–µ—Ä–µ–∑ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

---

## 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –®–∞–≥ 7.1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1 (GitHub Pages)
docker compose -f docker-compose.github.yml ps

# –í–∞—Ä–∏–∞–Ω—Ç 2 (–†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π)
docker compose -f docker-compose.manual.yml ps
```

**–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ "Up" –∏–ª–∏ "running":**
- `nginx-proxy` - Up
- `nginx-letsencrypt` - Up
- `unitask-backend` - Up
- `unitask-webhook` - Up
- `unitask-frontend-deploy` (—Ç–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç 1) - Exited (0) - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

### –®–∞–≥ 7.2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤
docker compose -f docker-compose.github.yml logs -f

# –ò–ª–∏ –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose -f docker-compose.github.yml logs backend
docker compose -f docker-compose.github.yml logs webhook
docker compose -f docker-compose.github.yml logs letsencrypt
```

**–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤.**

### –®–∞–≥ 7.3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health endpoints

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ backend
curl https://backend-devcore-max.cloudpub.ru/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl https://webhook-devcore-max.cloudpub.ru/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:** `{"status":"ok"}` –∏–ª–∏ `{"status":"healthy"}`

### –®–∞–≥ 7.4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ backend
openssl s_client -connect backend-devcore-max.cloudpub.ru:443 -servername backend-devcore-max.cloudpub.ru < /dev/null 2>/dev/null | openssl x509 -noout -dates

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ webhook
openssl s_client -connect webhook-devcore-max.cloudpub.ru:443 -servername webhook-devcore-max.cloudpub.ru < /dev/null 2>/dev/null | openssl x509 -noout -dates
```

**–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- https://backend-devcore-max.cloudpub.ru/health
- https://webhook-devcore-max.cloudpub.ru/health

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- ‚úÖ –í –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–º–æ–∫ üîí
- ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º
- ‚úÖ –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–µ—Ä–≤–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-10 –º–∏–Ω—É—Ç. –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –µ—â—ë –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ letsencrypt:

```bash
docker compose -f docker-compose.github.yml logs letsencrypt
```

### –®–∞–≥ 7.5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

**–í–∞—Ä–∏–∞–Ω—Ç 1 (GitHub Pages):**
- –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://username.github.io`
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏ —Ä–∞–±–æ—Ç–∞—Ç—å

**–í–∞—Ä–∏–∞–Ω—Ç 2 (–†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π):**
- –û—Ç–∫—Ä–æ–π—Ç–µ URL –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞, –≥–¥–µ –≤—ã –∑–∞–≥—Ä—É–∑–∏–ª–∏ —Ñ–∞–π–ª—ã
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏ —Ä–∞–±–æ—Ç–∞—Ç—å

### –®–∞–≥ 7.6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Max –±–æ—Ç–µ
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## 8. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1
docker compose -f docker-compose.github.yml ps

# –í–∞—Ä–∏–∞–Ω—Ç 2
docker compose -f docker-compose.manual.yml ps
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker compose -f docker-compose.github.yml logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker compose -f docker-compose.github.yml logs -f backend
docker compose -f docker-compose.github.yml logs -f webhook
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose -f docker-compose.github.yml restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose -f docker-compose.github.yml restart backend
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è)
docker compose -f docker-compose.github.yml stop

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose -f docker-compose.github.yml down
```

### –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–æ —É–¥–∞–ª–∏—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ volumes
docker compose -f docker-compose.github.yml down -v
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose -f docker-compose.github.yml down

# 2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git pull

# 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
./deploy-github.sh
# –∏–ª–∏
./deploy-manual.sh
```

---

## 9. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "MAX_BOT_TOKEN is not set"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
grep MAX_BOT_TOKEN .env

# –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ –µ—ë –≤ .env
nano .env
```

### –ü—Ä–æ–±–ª–µ–º–∞: "SECRET_KEY is not set"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á
openssl rand -base64 32

# –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ .env
nano .env
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É: SECRET_KEY=—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á
```

### –ü—Ä–æ–±–ª–µ–º–∞: "GITHUB_TOKEN is not set" (–≤–∞—Ä–∏–∞–Ω—Ç 1)

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–æ–∑–¥–∞–π—Ç–µ GitHub Personal Access Token (—Å–º. —à–∞–≥ 2.5)
2. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `.env` —Ñ–∞–π–ª:
   ```bash
   nano .env
   # –î–æ–±–∞–≤—å—Ç–µ: GITHUB_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**

1. **DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:**
   ```bash
   nslookup backend-devcore-max.cloudpub.ru
   nslookup webhook-devcore-max.cloudpub.ru
   ```
   –î–æ–ª–∂–Ω—ã —Ä–µ–∑–æ–ª–≤–∏—Ç—å—Å—è –Ω–∞ IP –≤–∞—à–µ–≥–æ VPS.

2. **–ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall
   sudo ufw status
   # –∏–ª–∏
   sudo firewall-cmd --list-all
   ```
   –ü–æ—Ä—Ç—ã 80 –∏ 443 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã.

3. **–õ–æ–≥–∏ letsencrypt:**
   ```bash
   docker compose -f docker-compose.github.yml logs letsencrypt
   ```
   –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö.

4. **–î–æ–º–µ–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞:**
   ```bash
   # –° –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
   curl -I http://backend-devcore-max.cloudpub.ru
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã –≤ firewall
- –î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 24 —á–∞—Å–æ–≤)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `.env` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `LETSENCRYPT_EMAIL`

---

## 10. –†–∞–±–æ—Ç–∞ —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ Let's Encrypt

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ `.env`:
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ–º–µ–Ω—ã –∏–∑ `BACKEND_DOMAIN` –∏ `WEBHOOK_DOMAIN`
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏—â—É—Ç—Å—è –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:
  1. Docker volume `nginx-certs` (–æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
  2. –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö–æ—Å—Ç–∞ `/etc/letsencrypt/live/{domain}/` (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–í–∞–∂–Ω–æ:** –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∏ –Ω–µ —Ç—Ä–æ–≥–∞—é—Ç—Å—è.

### –ü–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –≤–∞—à–∏—Ö –¥–æ–º–µ–Ω–æ–≤, –∏—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

#### –ü–æ–∏—Å–∫ –≤ Docker volume

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ volume nginx-certs
docker volume inspect nginx-certs

# –°–æ–∑–¥–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
docker run --rm -v nginx-certs:/certs alpine ls -la /certs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–º–µ–Ω
docker run --rm -v nginx-certs:/certs alpine ls -la /certs | grep "your-domain.com"
```

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
- `{domain}.crt` - —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- `{domain}.key` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á

#### –ü–æ–∏—Å–∫ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Ö–æ—Å—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–∞ —Ö–æ—Å—Ç–µ
sudo ls -la /etc/letsencrypt/live/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–º–µ–Ω
sudo ls -la /etc/letsencrypt/live/your-domain.com/
```

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
- `fullchain.pem` - –ø–æ–ª–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- `privkey.pem` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

#### –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ Docker volume

–ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É–∂–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ volume `nginx-certs`, –æ–Ω–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã. –ü—Ä–æ—Å—Ç–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
1. –§–∞–π–ª—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞: `{domain}.crt` –∏ `{domain}.key`
2. –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤–∞–ª–∏–¥–Ω—ã (–Ω–µ –∏—Å—Ç–µ–∫–ª–∏)
3. –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –¥–æ–º–µ–Ω–∞–º –∏–∑ `.env`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
docker run --rm -v nginx-certs:/certs alpine sh -c "openssl x509 -in /certs/your-domain.com.crt -noout -dates"
```

#### –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞ —Ö–æ—Å—Ç–µ

–ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `/etc/letsencrypt/live/`, –∏—Ö –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ Docker volume:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
docker run --rm \
  -v nginx-certs:/certs \
  -v /etc/letsencrypt:/letsencrypt:ro \
  alpine sh -c "
    cp /letsencrypt/live/your-domain.com/fullchain.pem /certs/your-domain.com.crt
    cp /letsencrypt/live/your-domain.com/privkey.pem /certs/your-domain.com.key
    chmod 644 /certs/your-domain.com.crt
    chmod 600 /certs/your-domain.com.key
  "
```

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `your-domain.com` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω –∏–∑ `BACKEND_DOMAIN` –∏–ª–∏ `WEBHOOK_DOMAIN`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

#### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x check-certificates.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É
./check-certificates.sh
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- –ù–∞–ª–∏—á–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –∏–∑ `.env`
- –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (–Ω–µ –∏—Å—Ç–µ–∫–ª–∏)
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–æ–º–µ–Ω–∞–º (CN –∏–ª–∏ SAN)

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ openssl

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≤ Docker volume
docker run --rm -v nginx-certs:/certs alpine sh -c \
  "openssl x509 -in /certs/your-domain.com.crt -noout -text"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (–º–∏–Ω–∏–º—É–º 7 –¥–Ω–µ–π)
docker run --rm -v nginx-certs:/certs alpine sh -c \
  "openssl x509 -checkend \$((7 * 24 * 60 * 60)) -noout -in /certs/your-domain.com.crt && echo 'Valid' || echo 'Expired'"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –Ω–∞ —Ö–æ—Å—Ç–µ
sudo openssl x509 -in /etc/letsencrypt/live/your-domain.com/fullchain.pem -noout -text
```

### –†–∞–±–æ—Ç–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ Let's Encrypt (Rate Limits)

Let's Encrypt –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:

- **50 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–º–µ–Ω –≤ –Ω–µ–¥–µ–ª—é**
- **5 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≤ –Ω–µ–¥–µ–ª—é**
- **300 –Ω–æ–≤—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –≤ 3 —á–∞—Å–∞**

#### –ï—Å–ª–∏ –≤—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏–º–∏—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–¥–æ–∂–¥–∞—Ç—å**

–õ–∏–º–∏—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã - –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é
- –õ–∏–º–∏—Ç—ã –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Let's Encrypt –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ rate limit
docker compose -f docker-compose.github.yml logs letsencrypt | grep -i "rate limit\|too many"
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –¥–æ–º–µ–Ω–æ–≤, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö –≤ Docker volume (—Å–º. —Ä–∞–∑–¥–µ–ª –≤—ã—à–µ).

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ Let's Encrypt (–Ω–µ –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç–æ–≤, –Ω–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –¥–æ–≤–µ—Ä—è—é—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–∞–º–∏):

```yaml
# –í docker-compose —Ñ–∞–π–ª–µ –¥–æ–±–∞–≤—å—Ç–µ –≤ —Å–µ—Ä–≤–∏—Å letsencrypt:
environment:
  - ACME_CA_URI=https://acme-staging-v02.api.letsencrypt.org/directory
```

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Ä–Ω–∏—Ç–µ production –æ–∫—Ä—É–∂–µ–Ω–∏–µ!

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ª–∏–º–∏—Ç–æ–≤

Let's Encrypt –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ letsencrypt –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤—Ä—É—á–Ω—É—é:

#### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker compose -f docker-compose.github.yml stop letsencrypt nginx-proxy
```

#### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ certbot (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
sudo apt-get update
sudo apt-get install certbot

# –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot certonly --standalone -d your-domain.com

# –ò–ª–∏ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤
sudo certbot certonly --standalone -d backend.example.com -d webhook.example.com
```

#### –®–∞–≥ 3: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ Docker volume

```bash
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞
docker run --rm \
  -v nginx-certs:/certs \
  -v /etc/letsencrypt:/letsencrypt:ro \
  alpine sh -c "
    cp /letsencrypt/live/your-domain.com/fullchain.pem /certs/your-domain.com.crt
    cp /letsencrypt/live/your-domain.com/privkey.pem /certs/your-domain.com.key
    chmod 644 /certs/your-domain.com.crt
    chmod 600 /certs/your-domain.com.key
  "
```

#### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker compose -f docker-compose.github.yml up -d nginx-proxy letsencrypt
```

#### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
./check-certificates.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ HTTPS
curl -I https://your-domain.com
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

acme-companion –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (–æ–±—ã—á–Ω–æ –∑–∞ 30 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è).

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```bash
# –õ–æ–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
docker compose -f docker-compose.github.yml logs letsencrypt | grep -i "renew\|update"
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ volume
docker run --rm -v nginx-certs:/certs alpine ls -la /certs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
docker run --rm -v nginx-certs:/certs alpine sh -c \
  "openssl x509 -in /certs/your-domain.com.crt -noout -subject -dates"

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker run --rm -v nginx-certs:/certs alpine sh -c \
  "rm -f /certs/your-domain.com.crt /certs/your-domain.com.key"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Let's Encrypt –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
docker compose -f docker-compose.github.yml restart letsencrypt
```

### –ü—Ä–æ–±–ª–µ–º–∞: "502 Bad Gateway" –∏–ª–∏ "Connection refused"

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã:**
   ```bash
   docker compose -f docker-compose.github.yml ps
   ```
   –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ "Up".

2. **–õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**
   ```bash
   docker compose -f docker-compose.github.yml logs backend
   docker compose -f docker-compose.github.yml logs webhook
   ```
   –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö.

3. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏:**
   ```bash
   docker network inspect unitask-network
   ```
   –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å–µ—Ç–∏ `unitask-network`.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
  ```bash
  docker compose -f docker-compose.github.yml restart
  ```
- –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ, –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:
  ```bash
  docker compose -f docker-compose.github.yml down
  ./deploy-github.sh
  ```

### –ü—Ä–æ–±–ª–µ–º–∞: "Database locked"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose -f docker-compose.github.yml down

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
sleep 5

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
./deploy-github.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ backend

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**

1. **VITE_API_URL –≤ —Å–æ–±—Ä–∞–Ω–Ω–æ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:**
   ```bash
   # –î–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 1 - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ GitHub Pages
   # –î–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 2 - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
   grep -r "backend-devcore-max" frontend-dist/
   ```

2. **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - Backend –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å –¥–æ–º–µ–Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend –Ω–∞ –Ω–∞–ª–∏—á–∏–µ CORS –æ—à–∏–±–æ–∫

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `BACKEND_URL` –≤ `.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
  ```bash
  docker compose -f docker-compose.github.yml down
  ./deploy-github.sh
  ```

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**

1. **Webhook –ø–æ–¥–ø–∏—Å–∞–Ω:**
   ```bash
   docker compose -f docker-compose.github.yml logs webhook | grep -i "subscribe\|webhook"
   ```
   –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ.

2. **WEBHOOK_URL –¥–æ—Å—Ç—É–ø–µ–Ω:**
   ```bash
   curl https://webhook-devcore-max.cloudpub.ru/health
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è `{"status":"ok"}`.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `WEBHOOK_URL` –≤ `.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ webhook –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É DOMAIN –∏ URL –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

**DOMAIN –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`BACKEND_DOMAIN`, `WEBHOOK_DOMAIN`):
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è nginx-proxy –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ reverse proxy
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Let's Encrypt –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –î–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¢–û–õ–¨–ö–û –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (–±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏ –ø—É—Ç–∏)
- –ü—Ä–∏–º–µ—Ä: `backend.example.com`

**URL –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`BACKEND_URL`, `WEBHOOK_URL`):
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –î–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ü–û–õ–ù–´–ô URL —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º (https://)
- –ü—Ä–∏–º–µ—Ä: `https://backend.example.com`

**–û–ë–ê –Ω–∞–±–æ—Ä–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´** –∏ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥—É!

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–µ—Ä–µ–∑ Docker:

1. **nginx-proxy** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç reverse proxy –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
2. **letsencrypt** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
3. **backend** - FastAPI —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8000
4. **webhook** - Webhook —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8080
5. **frontend** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ GitHub Pages –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite
- –§–∞–π–ª –ë–î: `data.sqlite3` –≤ Docker volume `backend-data`
- Backend –∏ webhook –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –æ–±—â–∏–π —Ñ–∞–π–ª –ë–î
- SQLite –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç concurrent access

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ webhooks

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ webhook –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ `MAX_BOT_TOKEN`
2. –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–µ–∫—É—â–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
3. –£–¥–∞–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
4. –°–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ `WEBHOOK_URL`
5. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è webhook —Å–µ—Ä–≤–µ—Ä

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ git
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –ª–æ–≥–∞—Ö –∏–ª–∏ –∫–æ–Ω—Å–æ–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–∫–µ–Ω—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `SECRET_KEY` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –¥–µ–ø–ª–æ—è —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω
- [ ] –§–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
- [ ] `MAX_BOT_TOKEN` –ø–æ–ª—É—á–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.env`
- [ ] `SECRET_KEY` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.env`
- [ ] DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è
- [ ] –ü–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã –≤ firewall
- [ ] –î–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 1: GitHub —Ç–æ–∫–µ–Ω —Å–æ–∑–¥–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.env`
- [ ] –í—Å–µ –¥–æ–º–µ–Ω—ã –≤ `.env` —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] `LETSENCRYPT_EMAIL` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ:

- **Backend API:** `https://backend-devcore-max.cloudpub.ru`
- **Webhook:** `https://webhook-devcore-max.cloudpub.ru`
- **Frontend:** `https://username.github.io` (–≤–∞—Ä–∏–∞–Ω—Ç 1) –∏–ª–∏ –≤–∞—à —Ö–æ—Å—Ç–∏–Ω–≥ (–≤–∞—Ä–∏–∞–Ω—Ç 2)

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è `restart: unless-stopped`.

SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ–ø–∏—Å–∞–Ω—ã –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º"
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Docker –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
